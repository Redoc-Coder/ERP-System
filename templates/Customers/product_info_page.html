<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>XPerience | Shop All you Want</title>
    <link rel="icon" href="/static/images/XPerience-LOGO only.png" /
    >
    <!--Fontawesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <!--Animation-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
    <!-- Bootstrap icons-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/static/css/customers_css/landingpage.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-navbar">
      <div class="container px-4 px-lg-5">
        <!-- Logo and Brand -->
        <div class="d-flex align-items-center">
          <img
            src="/static/images/XPerience-LOGO only.png"
            alt="Logo"
            class="navbar-logo"
          />
          <a class="navbar-brand" href="#!">XPerience</a>
        </div>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="{{ url_for('LandingPage') }}"
                >Home</a
              >
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                id="navbarDropdown"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                >Shop</a
              >
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li>
                  <a class="dropdown-item" href="{{ url_for('LandingPage') }}"
                    >All Products</a
                  >
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a
                    class="dropdown-item"
                    href="{{ url_for('CampingHikingGear') }}"
                    >Camping and Hiking Gear</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="{{ url_for('ExerciseFitnessGear') }}"
                    >Exercise and Fitness Gear</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="{{ url_for('SportsEquipment') }}"
                    >Sports Equipment</a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="{{ url_for('OutdoorClothing') }}"
                    >Outdoor Clothing</a
                  >
                </li>
              </ul>
            </li>
          </ul>
          <form class="d-flex">
            <a class="btn btn-outline-dark" href="{{ url_for('Cart') }}">
              <i class="bi-cart-fill me-1"></i>
              Cart
              <span
                id="cart-badge"
                class="badge bg-dark text-white ms-1 rounded-pill"
                >{{ cart_count }}</span
              >
            </a>
          </form>

          <!-- Profile Section -->
          <ul class="navbar-nav">
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle d-flex align-items-center"
                href="#"
                id="navbarDropdownMenuLink"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
              <img
              src="{% if user_image and user_image.profile %}data:image/{{ user_image.mime_type }};base64,{{ user_image.profile }}{% else %}/static/images/default_image.jpg{% endif %}"
              class="rounded-circle ms-2"
              height="32"
              width="35"
              alt="Avatar"
              loading="lazy"
          />
              </a>
              <ul
                class="dropdown-menu"
                aria-labelledby="navbarDropdownMenuLink"
              >
                <li>
                  <a class="dropdown-item" href="{{ url_for('MyProfile') }}"
                    >My profile</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="{{ url_for('MyOrder') }}"
                    >My orders</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="{{ url_for('SellerDashboard') }}"
                    >My shop</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="{{ url_for('Login') }}"
                    >Logout</a
                  >
                </li>
              </ul>
            </li>
          </ul>
          <!-- End Profile Section -->
        </div>
      </div>
    </nav>

    <!-- Header-->
    <header class="py-5">
        <div class="container mt-5">
            <div class="card-cont mb-3" style="min-height: 500px;" >
                <div class="row g-0 gx-5">
                  <div class="col-md-7">
                     <!--Product image-->
                     <img src="data:{{ product.mime_type }};base64, {{ product.product_image }}" class="img-fluid rounded-start" alt="product" style="min-height: 450px; max-height: 450px;">
                  </div>
                  <div class="col-md-5">
                    <div class="card-body">
                    <!-- Product name -->
                    <h3 class="card-title fw-bold">{{ product.product_name }}</h3>
                    <!-- Product description -->
                    <div class="card-text" style="color: #686665;">{{ product.product_details }}</div>
                    <div
                    class="small text-warning mb-2" style="display: flex;"
                  >
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>
                    <div class="bi-star-fill"></div>
                    <div class="bi-star"></div>
                    <div class="bi-star"></div>
                    <p style="color: #686665;">({{ num_ratings }})</p>
                  </div> 
                    
                    <!-- Product price -->
                    <h4>â‚±{{ product.price }}</h4>
                     <hr  style="color: #686665;">
                   
                  
                     
                    <!--Quantity button-->
                    <div class="basta " style="display: flex;  align-items: center;">
                      
              
                      <div class="input-group mt-4" style="margin-right: 15px; max-width: 200px; border-radius: 20px; background-color: #EFF0F0;">
                        <span class="input-group-btn">
                          <button type="button" class="btn" id="decrement">-</button>
                        </span>
                        <input type="text" class="form-control text-center" id="quantity" value="1" min="1" style="border: none; background-color: #EFF0F0;">
                        <span class="input-group-btn">
                          <button type="button" class="btn" id="increment">+</button>
                        </span>
                      </div>
                    <span class="mt-4" style="color: #686665; font-size: 0.9rem;">Hurry, only <span style="color: black; font-weight: bold;">{{product.quantity}}</span>  left in stock! </span>
                  </div>
                   
                   
                    <div class="btn-cont mt-4">
                      <button style="width: 45%; margin-right: 15px; border-radius: 50px;" 
                      type="button" class="btn btn-dark btn-lg" 
                      onclick="buyNow('{{ product.id }}')"
                      {% if product.quantity == 0 %}
                          disabled
                      {% endif %}
              >Buy now</button>
                        <button id="addToCartButton"  data-product-id="{{ product.id }}" style="width: 45%; border-radius: 50px;" type="button" class="btn btn-outline-secondary btn-lg add-cart">Add to cart</button>
                    </div>
                    
                    <hr style="color: #686665 ;" class="mb-4">

                    <div class="img-cont ">
                        <img src="/static/images/svg/store-2017.svg" class="img-fluid" alt="" style="max-height: 100px;">
                        <div class="seller-name-and-rating">
                            <span style="font-size: 1.5rem;"> <a href="" style="text-decoration: none;"> {{ seller.username }}</a></span>
                             
                      
                        </div>
                    
                    </div>
                 

                    </div>
                  </div>
                </div>
            </div>  

        </div>  
     

    </header>

 
    <section class="mt-5">
      <section class="">
        <div class="container px-4 px-lg-5 mt-5">
            <h2 class="mb-4 d-flex justify-content-between align-items-center">
                <span class="mr-2">You may also like</span>
            </h2>
    
            <div class="row row-cols-2 row-cols-md-3 row-cols-xl-4">
              {% for related_product in related_products %}
                    
                        <div class="col mb-5" data-aos="fade-up" data-aos-duration="1000" data-aos-once="true" data-aos-delay="600">
                            <div class="card h-80">
                                <!-- Product image -->
                                <div class="img-container" style="background-color: #F3F3F3;">
                                    <img class="card-img-top" src="data:{{ related_product.mime_type }};base64, {{ related_product.product_image }}" alt="..." height="200">
                                </div>
                                <!-- Product details -->
                                <div class="card-body">
                                    <div style="line-height: 1.7;">
                                        <!-- Product name-->
                                        <span style="font-size: 18px;" class="fw-bolder">{{ related_product.product_name }}</span>
                                        <br>
                                        <!-- Product description-->
                                        <span style="color: #686665; font-size: 0.875rem;">{{ related_product.product_details }}</span>
                                        <br>
                                        <!-- Product price-->
                                        <span style="font-size: 16px;" class="fw-bold">â‚±{{ related_product.price }}</span>
                                        <div class="mt-2">
                                            <!-- Hidden input fields for the product data -->
                                            <input type="hidden" class="product-name" value="{{ related_product.product_name }}">
                                            <input type="hidden" class="product-price" value="{{ related_product.price }}">
                                            <button type="button" class="btn btn-outline-dark mt-auto add-to-cart" style="border-radius: 20px; font-weight: 650;">Add to Cart</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- Product actions -->
                                <div class="card-footer border-top-0 bg-transparent"></div>
                            </div>
                        </div>
                  
                {% endfor %}
            </div>
        </div>
    </section>

    

    <!-- Footer-->
   
    <footer class="bg-dark text-center text-white">
      <!-- Grid container -->
      <div class="container p-4 pb-0">
        <!-- Section: Social media -->
        <section class="mb-4">
          <!-- Facebook -->
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><i class="fa fa-facebook-f"></i
          ></a>
    
       
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><i class="fa fa-twitter"></i
          ></a>
    
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><i class="fa fa-google"></i
          ></a>

          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><i class="fa fa-instagram"></i
          ></a>
    
      
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><i class="fa fa-linkedin"></i
          ></a>
    
 
          <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
            ><i class="fa fa-github"></i
          ></a>
        </section>
  
      </div>

      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        Â© 2020 Copyright:
        <a class="text-white">XPerience</a>
      </div>
      <!-- Copyright -->
    </footer>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
      const quantityInput = document.getElementById('quantity');
      const incrementButton = document.getElementById('increment');
      const decrementButton = document.getElementById('decrement');

      incrementButton.addEventListener('click', function () {
        // Increment the quantity
        quantityInput.value = parseInt(quantityInput.value) + 1;

        // Make an AJAX request to update the order_quantity in the backend
        updateOrderQuantity(quantityInput.value);
      });

      decrementButton.addEventListener('click', function () {
        // Ensure the quantity doesn't go below 1
        if (parseInt(quantityInput.value) > 1) {
          // Decrement the quantity
          quantityInput.value = parseInt(quantityInput.value) - 1;

          // Make an AJAX request to update the order_quantity in the backend
          updateOrderQuantity(quantityInput.value);
        }
      });
      const productId = addToCartButton.getAttribute('data-product-id');
      function updateOrderQuantity(newQuantity) {
        // Make an AJAX request to update the order_quantity in the backend
        fetch('/update_order_quantity', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            productId: productId, // Replace with the actual product ID
            newOrderQuantity: newQuantity,
          }),
        });
      }
    });


    </script>



    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap core JS-->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <!--ANimation-->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script src="/static/js/addtocart.js"></script>
    <script src="/static/js/landingpage.js"></script>
    <script src="/static/js/buynow.js"></script>
  </body>
</html>
